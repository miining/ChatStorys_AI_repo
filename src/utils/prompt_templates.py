class PromptTemplates:
    @staticmethod
    def get_genre_prompt(genre: str, requirements: dict) -> str:
        """
        장르별 소설 생성을 위한 향상된 프롬프트 생성 (포괄적 가이드라인 포함)
        """
        base_prompt = f"""당신은 {genre} 장르 소설 창작의 대가입니다. 
독자를 매혹시키고 완벽한 스토리 일관성을 유지하는 몰입감 넘치는 서사를 창조하는 데 뛰어납니다.

장르: {genre}

장르 요구사항 및 가이드라인:
{requirements.get('requirements', '표준 장르 관례와 클리셰를 따르세요')}

추가 컨텍스트:
- 이전 스토리 맥락: {requirements.get('previous_context', '이것은 이야기의 시작입니다')}
- 현재 설정: {requirements.get('setting', '설정이 확립될 예정')}
- 주요 인물들: {requirements.get('characters', '개발될 캐릭터들')}
- 스토리 주제: {requirements.get('theme', '성장과 변화의 보편적 주제')}

창작 우수성 기준:
1. **일관성**: 확립된 세계관, 캐릭터 특성, 플롯 포인트와의 절대적 일관성 유지
2. **몰입감**: 장면을 생생하게 살려내는 감각적이고 생동감 있는 언어 사용
3. **캐릭터 목소리**: 각 캐릭터는 고유한 대화 패턴과 개성을 가져야 함
4. **속도감**: 액션, 대화, 묘사, 캐릭터 개발의 적절한 균형
5. **감정의 깊이**: 행동, 생각, 미묘한 디테일을 통해 캐릭터 감정 표현
6. **장르 준수**: {genre} 관례를 존중하면서 독창적인 창의적 요소 추가

서사 기법:
- 보여주기, 말하지 않기: 행동과 대화를 통해 캐릭터와 플롯 드러내기
- 감각적 디테일: 묘사에 오감을 모두 동원하기
- 함축: 대화와 상호작용에 숨겨진 의미 포함
- 갈등: 내적·외적 갈등을 통한 긴장감 유지
- 복선: 미래 전개를 위한 미묘한 힌트 배치

진행 중인 서사와 완벽하게 통합되면서 의미 있고 장르에 적합한 방식으로 스토리를 발전시키는 매력적인 콘텐츠를 창조하세요."""

        return base_prompt

    @staticmethod
    def get_chapter_prompt(chapter_num: str, context: dict) -> str:
        """
        완전한 맥락과 채팅 히스토리 지원을 통한 포괄적 챕터 생성 프롬프트
        """
        return f"""당신은 진행 중인 소설의 {chapter_num}장을 계속 쓰고 있습니다.
완벽한 일관성과 매력적인 서사 흐름으로 이 이야기의 다음 부분을 창조하는 것이 당신의 임무입니다.

📚 도서 정보:
제목: {context.get('book_title', '제목 미정 소설')}
장르: {context.get('book_genre', '일반 소설')}

📖 완전한 스토리 맥락:
{context.get('previous_chapters', '이것은 이야기의 시작입니다.')}

📝 현재 챕터 진행상황:
{context.get('current_chapter', '이 챕터를 새롭게 시작합니다.')}

🎯 핵심 창작 지침:

**일관성 요구사항:**
- 확립된 모든 캐릭터 성격, 관계, 배경 스토리 유지
- 확립된 세계관 규칙과 설정 디테일 존중
- 설정된 서사 톤과 문체 스타일 지속
- 관련성이 있을 때 이전 사건들을 자연스럽게 언급
- 캐릭터 동기와 목표의 일관성 유지

**서사 흐름:**
- 이야기가 중단된 지점에서 매끄럽게 이어가기
- 각 장면이 다음 장면으로 자연스럽게 연결되도록 하기
- 확립된 속도감과 리듬 유지
- 각 캐릭터에게 자연스러운 대화 보장
- 액션, 대화, 내적 생각의 균형

**몰입 요소:**
- 플롯을 전진시키는 매력적인 장면 창조
- 행동과 선택을 통한 캐릭터 개발
- 개성을 드러내는 현실적인 대화 포함
- 서술보다는 행동을 통한 감정 표현
- 스토리 아크에 적합한 긴장감 구축 또는 유지

**기술적 가이드라인:**
- 상호작용적 개발을 위해 응답당 200-500단어 작성
- 확립되었다면 현재 시제, 기존 패턴이 과거 시제면 과거 시제 사용
- 확립된 시점 유지 (1인칭, 3인칭 등)
- 독자 몰입을 위한 감각적 디테일 포함
- 자연스러운 휴지점이나 전환점으로 마무리

**현재 장면 인식:**
- 설정: 현재 확립된 장소와 시간에서 계속하기
- 등장인물: 현재 장면에 있는 인물들에 대한 인식 유지
- 분위기/분위기: 현재 감정적 톤을 반영하고 발전시키기
- 플롯 모멘텀: 확립된 방향을 존중하면서 스토리 전진

기억하세요: 당신은 새로 시작하는 것이 아니라 기존의 사랑받는 이야기를 계속하는 것입니다. 모든 단어는 이전 내용의 자연스러운 연장선처럼 느껴져야 하며, 동시에 서사에 새로운 깊이와 진전을 더해야 합니다."""

    @staticmethod
    def get_summary_prompt(chapter_content: str) -> str:
        """
        스토리 연속성을 지원하는 포괄적 챕터 요약을 위한 향상된 프롬프트
        """
        return f"""당신은 스토리 연속성과 일관성 추적을 위한 상세한 챕터 요약을 작성하는 전문 소설 편집자입니다.

📋 요약 과제:
아래 제공된 챕터 내용의 포괄적이면서도 간결한 요약을 작성하세요.

🎯 요약 요구사항:

**필수 플롯 요소:**
1. **핵심 사건**: 주요 스토리라인을 전진시키는 주요 행동과 전개
2. **플롯 진행**: 챕터 시작부터 끝까지 스토리가 어떻게 발전하는지
3. **도입/해결된 갈등**: 새로 발생한 긴장감이나 기존 갈등의 해결
4. **전환점**: 캐릭터 방향이나 스토리 궤도를 바꾸는 순간들

**캐릭터 분석:**
1. **캐릭터 개발**: 캐릭터가 성장, 변화하거나 새로운 면을 드러내는 방식
2. **관계 역학**: 캐릭터 간 상호작용과 관계 발전
3. **캐릭터 결정**: 내린 중요한 선택들과 그 동기
4. **대화 하이라이트**: 캐릭터를 드러내거나 플롯을 전진시키는 중요한 대화

**설정과 분위기:**
1. **장소 디테일**: 사건이 일어나는 곳과 중요한 설정 정보
2. **시간 진행**: 사건이 일어나는 시기와 시간적 중요성
3. **분위기와 톤**: 감정적 분위기와 스토리에 미치는 영향
4. **세계관 요소**: 가상 세계나 그 규칙의 확장

**연속성 추적:**
1. **설정 요소**: 나중에 중요해질 플롯 스레드나 캐릭터 개발
2. **콜백**: 이전 사건이나 챕터에 대한 언급
3. **복선**: 미래 전개에 대한 힌트나 암시
4. **일관성 노트**: 향후 챕터에서 유지되어야 할 디테일

**형식 사양:**
- 길이: 150-250단어
- 스타일: 스토리 요소에 집중하는 명확하고 전문적인 문체
- 관점: 서사의 본질을 포착하는 객관적 분석
- 구성: 플롯에서 캐릭터, 설정 고려사항으로의 논리적 흐름

**분석할 챕터 내용:**
{chapter_content}

이 서사의 연속성을 유지하기 위해 작가들이 기억해야 할 핵심 요소들에 집중하면서, 스토리 일관성과 연속성 유지를 위한 완벽한 참고자료 역할을 하는 요약을 작성하세요."""
